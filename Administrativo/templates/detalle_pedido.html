<div class="row-fluid">
<div class="span12">
    <navmenu></navmenu>
</div>
</div>
<div class="content_principal">
	<p class="title_npedido">Nº Pedido: LIE000{{pedidos.id}}</p>
  <button class="btn pull-right buttom_cancel" style="margin-right:5px;" ng-click="cancelar()">Volver al listado</button>
	<div class="content_datosfacturar">
  		<p class="title_pedido dest-orin">CLIENTE</p>
  		<div class="content_name">
      		<p>Nombre: {{pedidos.nombre}}</p>
      		<p>Teléfono: {{cliente.telefono}}</p>
      	</div>
      	<div class="content_name">
      		<p>Correo: {{cliente.email}}</p>
      		<p ng-if="pedidos.tipo_usuario != 3">DNI: {{cliente.dni}}</p>
          <p ng-if="pedidos.tipo_usuario == 3">RUC: {{cliente.ruc}}</p>
      	</div>
  	</div>
  	<br>
  	<p class="title_npedido">Tipo de Servicio: {{pedidos.tipo}}</p>
    <p class="imprimir_pedido" ng-click="imprimir()"><i class="fa fa-print"></i> Imprimir Pedido</p>
  	<div class="row">
      	<div class="col-md-7 content_detpedido">
            <div class="content_formdetalle">
              	<div class="content_dist"><h5 class="dest-orin"> ORIGEN</h5></div>
              	<div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                          <div class="col-xs-12 col-md-7">
                            <div class="form-group input_pedido">
                                <label>Dirección de Recojo</label>
                                <input  type="text" class="form-control" g-places-autocomplete options="autocompleteOptions" ng-model="destinos.origen" placeholder="Dirección de destino" ng-blur="consola2(destinos,0)" ng-enter="consola2(destinos,0)">
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-5">
                            <div class="form-group input_pedido">
                              <label>N° Casa, Dpto., Lote</label>
                              <input type="text"  ng-model="destinos.departamento_origen" class="form-control" required/>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xs-12 col-md-5">
                            <div class="form-group input_pedido">
                              <label>Nombre</label>
                              <input type="text"  ng-model="destinos.nombre_origen" class="form-control" required/>
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-3">
                            <div class="form-group input_pedido">
                              <label>Teléfono</label>
                             <input type="texto"  ng-model="destinos.telefono_origen" class="form-control" required/>
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Distrito</label>
                              <select ng-model='destinos.distrito' ng-change="ajusteDistrito(destinos)" class="form-control" null-is-undefined ng-options="select.nombre for select in distritos" style="padding-top: 3px;">
                                <option value="" style="color:#9c9c9f">Distrito</option>
                              </select>
                            </div>
                          </div>
                        </div> 
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                              <div class="form-group input_pedido">
                                <label>Comentarios</label>
                                <textarea class="form-control" ng-model="destinos.comentarios"></textarea>
                              </div>
                            </div>
                        </div>
                        <div class="row" ng-if="pedidos.tipo_usuario == 3 && cliente.almacen == 1">
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Horario de Recojo</label>
                              <md-datepicker ng-model="fecha_origen" ng-change="ajusteFecha_origen(fecha_origen)" md-placeholder="Enter date" md-date-filter="onlyWeekendsPredicate"></md-datepicker>
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Turno</label>
                              <select ng-model='horaPedido2_origen' ng-change="ajusteHora1_origen(horaPedido2_origen)" class="form-control" null-is-undefined ng-options="select.id as select.horario for select in seleccionarHorario">
                                <option value="">Horario</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Rango</label>
                              <select ng-model='horaPedido3_origen' ng-change="ajusteHora2_origen(horaPedido3_origen)" class="form-control" null-is-undefined ng-options="selection.hora for selection in seleccionarHorae | filter:{ids:horaPedido2_origen}">
                                <option value="">Hora</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="row" ng-if="pedidos.tipo_usuario == 3 && cliente.almacen == 0">
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Horario de Recojo</label>
                              <md-datepicker ng-model="fecha_origen" ng-change="ajusteFecha_origen(fecha_origen)" md-placeholder="Enter date" md-date-filter="onlyWeekendsPredicate"></md-datepicker>
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Turno</label>
                              <select ng-model='horaPedido2_origen' ng-change="ajusteHora1_origen(horaPedido2_origen)" class="form-control" null-is-undefined ng-options="select.id as select.horario for select in seleccionarHorarioO">
                                <option value="">Horario</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-xs-12 col-md-4">
                            <div class="form-group input_pedido">
                              <label>Rango</label>
                              <select ng-model='horaPedido3_origen' ng-change="ajusteHora2_origen(horaPedido3_origen)" class="form-control" null-is-undefined ng-options="selection.hora for selection in seleccionarHoraeO | filter:{ids:horaPedido2_origen}">
                                <option value="">Hora</option>
                              </select>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
                <div ng-repeat="pedido in destinos">
                    <div class="content_dist" ng-show="destinos.length < 2"><h5 class="dest-orin" ng-show="destinos.length < 2">DESTINO</h5></div>
                    <div class="content_dist" ng-show="destinos.length > 1"><h5 class="dest-orin" ng-show="destinos.length > 1">DESTINO {{$index + 1}}</h5></div>
                    <div class="panel panel-default">
                      <div class="panel-body">
                          <div class="row">
                            <div class="col-xs-12 col-md-7">
                              <div ng-show="false" class="col-md-12">
                                <input  ng-model="chosenPlace" googleplace/>
                                <input  type="text" ng-model="pedido.destino" placeholder="Enter an origin location"  g-places-autocomplete  options="autocompleteOptions" ng-enter="consola()">
                              </div>
                              <div class="form-group input_pedido">
                                  <label>Dirección de Destino</label>
                                  <input class="form-control" g-places-autocomplete options="autocompleteOptions" ng-model="pedido.destino" placeholder="Dirección de destino" ng-change="change(pedido.id)" ng-blur="consola2(pedido.id,1)" ng-enter="consola2(pedido.id,1)"/>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-5">
                              <div class="form-group input_pedido">
                                <label>N° Casa, Dpto., Lote</label>
                                <input type="text" class="form-control" ng-model="pedido.departamento_destino" required/>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-xs-12 col-md-5">
                              <div class="form-group input_pedido">
                                <label>Nombre Contacto</label>
                                <input type="text" class="form-control" ng-model="pedido.nombre_destino" required/>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-3">
                              <div class="form-group input_pedido">
                                <label>Teléfono</label>
                                <input type="text" class="form-control" ng-model="pedido.telefono_destino" required/>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Distrito</label>
                                <select ng-model='pedido.distrito' ng-change="ajusteDistrito2(pedido)" class="form-control" null-is-undefined ng-options="select.nombre for select in distritos" style="padding-top: 3px;">
                                  <option value="" style="color:#9c9c9f">Distrito</option>
                                </select>
                              </div>
                            </div>
                          </div> 
                          <div class="row">
                            <div class="col-xs-12 col-md-12">
                              <div class="form-group input_pedido">
                                <label>Comentarios</label>
                                <textarea class="form-control" ng-model="pedido.comentarios2"></textarea>
                              </div>
                            </div>
                          </div>
                          <div class="row" ng-if="pedidos.tipo_usuario == 3">
                            <div class="col-xs-12 col-md-12">
                              <div class="form-group input_pedido">
                                <label>Productos</label>
                                <textarea class="form-control" ng-model="pedido.detalle" placeholder="productos(Ecommerce sin almacén)"></textarea>
                              </div>
                            </div>
                          </div>
                          <div class="row" ng-if="pedidos.tipo_usuario == 3">
                            <div class="col-xs-12 col-md-8">
                              <div class="form-group input_pedido">
                                <label>Cantidad productos a enviar</label>
                                <input type="text" class="form-control" ng-model="pedido.cantidad" placeholder="0" />
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Costo productos</label>
                                <input type="text" class="form-control pl-30" ng-model="pedido.subtotal" ng-change="costo_envio(pedido)" ng-disabled="user.almacen == 1"/>
                              </div>
                            </div>
                          </div>
                          <div class="row" ng-if="pedidos.tipo_usuario == 3">
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Costo de envío</label>
                                <input type="text" class="form-control pl-30" ng-model="pedido.cobrarecommerce" ng-change="costo_envio(pedido)"/>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Descuento</label>
                                <input type="text" class="form-control pl-30" ng-model="pedido.descuento" ng-change="costo_envio(pedido)"/>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Total a cobrar</label>
                                <input type="text" class="form-control pl-30" ng-model="pedido.total"/>
                              </div>
                            </div>
                          </div>
                          <div class="row" ng-if="pedidos.tipo_usuario == 3">
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Fecha Envío</label>
                                <md-datepicker ng-model="pedido.fecha_destino1" ng-change="ajusteFecha_destino(pedido)" md-placeholder="Enter date" md-date-filter="onlyWeekendsPredicate"></md-datepicker>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Turno</label>
                                <select ng-model='pedido.horario_destino' ng-change="ajusteHora1_destino(pedido)" class="form-control" null-is-undefined ng-options="select.id as select.horario for select in seleccionarHorario">
                                  <option value="">Seleccione el horario</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-xs-12 col-md-4">
                              <div class="form-group input_pedido">
                                <label>Rango</label>
                                <select ng-model='pedido.hora_destino1' ng-change="ajusteHora2_destino(pedido.hora_destino1,pedido)" class="form-control" null-is-undefined ng-options="selection.hora for selection in seleccionarHorae | filter:{ids:pedido.horario_destino}">
                                  <option value="">Seleccione la hora</option>
                                </select>
                              </div>
                            </div>
                          </div>
                          <div class="row" ng-if="pedidos.tipo_usuario == 3">
                            <div class="col-xs-12 col-md-12">
                              <div class="form-group input_pedido">
                                <label>Forma de Pago</label>
                                <md-radio-group ng-model="pedidos.forma_pago">
                                  <md-radio-button ng-value="0" class="md-primary"> Efectivo</md-radio-button>
                                  <md-radio-button ng-value="2" class="md-primary"> Pos Visa</md-radio-button>
                                </md-radio-group>
                              </div>
                            </div>
                          </div>
                      </div>
                    </div>
                </div>
                <br>
                <div class="panel panel-default" ng-show="showProgramar" ng-if="cliente.tipo_usuario != 3">
                  <div class="panel-body">
                    <div class="row">
                      <h4 style="margin-left: 15px;font-weight: bold;">PROGRAMADO</h4>
                      <div class="col-xs-12 col-md-6">
                      <md-datepicker ng-model="myDate" ng-change="ajusteFecha(myDate)" md-placeholder="Enter date" md-date-filter="onlyWeekendsPredicate"></md-datepicker>
                      </div>
                      <div class="col-xs-12 col-md-6">
                      <select ng-model='horaPedido1' ng-change="ajusteHora(horaPedido1)" class="form-control" null-is-undefined ng-options="select.hora for select in selectHora">
                        <option value="">Horario</option>
                      </select>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
            <br>
            <div class="row">
              <div class="col-md-12">
                <button class="btn pull-left buttom_cancel" style="margin-right:5px;margin-top: 27px;" ng-click="cancelar()">Volver al listado</button>
                <md-button class="md-raised button_cliente pull-left md-button md-ink-ripple" ng-click="actualizar()">Actualizar Datos</md-button>
                <md-button class="md-raised button_cliente pull-right md-button md-ink-ripple" ng-click="asignarmoto(pedidos)">Asignar Motorizado</md-button>
              </div>
            </div>
      	</div>
      	<div class="col-md-5">
      		<br>
          	<div id="map"></div>
            <div class="content_extdetalle" style="padding:5px !important">
              	<div class="row content-unidades2 content_timedet">
	                <div class="col-xs-4 col-md-4"><img src="images/location-blank.png" width="30" class="img_detalle"><p class="text_unidades2">KM: {{pedidos.km}}</p></div>
	                <div class="col-xs-3 col-md-3"><img src="images/passage-blank.png" width="30" class="img_detalle"><p class="text_unidades2">Min: {{pedidos.min}}</p></div>
	                <div class="col-xs-5 col-md-5" ng-if="cliente.tipo_usuario != 3"><img src="images/credit-blank.png" width="30" class="img_detalle"><p class="text_unidades2">Costo: S/. {{pedidos.costo | number:2}}</p></div>
                  <div class="col-xs-5 col-md-5" ng-if="cliente.tipo_usuario == 3"><img src="images/credit-blank.png" width="30" class="img_detalle"><p class="text_unidades2">Costo: S/. {{costoe | number:2}}</p></div>
	                <br>
	                <div class="clearfix"></div>
	            </div>
              	<div class="row">
              		<br>
              		<div class="col-md-12" ng-if="cliente.tipo_usuario == 3">
                    <p class="title_detalle2">Costo Recojo: S/.{{pedidos.costo_recojo | number:2}}</p>
                  </div>
                  <div class="col-md-12">
              			<p class="title_detalle2">Tipo de Servicio: {{pedidos.tipo}}</p>
              		</div>
                  <div class="col-md-12">
                    <p class="title_detalle2">Hora Programada: {{pedidos.hora1}}</p>
                  </div>
              		<div class="col-md-6">
              			<p class="title_detalle2">Forma de Pago: {{pedidos.forma_pago1}}</p>
              		</div>
              		<div class="col-md-6">
              			<div class="col-xs-12 col-md-4">
	                    	<img src="images/letter.png" width="19"><p class="title_caja2"> {{pedidos.cajap}}</p>
	                  	</div>
	                  	<div class="col-xs-12 col-md-4">
	                    	<img src="images/box.png" width="20"><p class="title_caja2"> {{pedidos.cajam}}</p> 
	                  	</div>
	                  	<div class="col-xs-12 col-md-4">
	                    	<img src="images/delivery-truck.png" width="21"><p class="title_caja2"> {{pedidos.cajag}}</p>
	                  	</div>
              		</div>
              		<div class="col-md-12" ng-if="cliente.tipo_usuario != 3">
                    <p class="title_detalle2">Fecha de Envío: {{pedidos.fecha}}</p>
                  </div>
                  <div class="col-md-12" ng-if="cliente.tipo_usuario != 3">
                    <p class="title_detalle2">Hora Programada: {{pedidos.hora}}</p>
                  </div>
                  <div ng-if="cliente.tipo_usuario == 3">
                    <div class="col-md-12">
                      <p class="title_detalle2">Fecha de Recojo: {{pedidos.fecha_origen}} ({{pedidos.hora_origen}})</p>
                    </div>
                    <div class="col-md-12">
                      <p class="title_detalle2">Fecha de Entrega: {{destinos[0].fecha_entrega}} ({{destinos[0].hora_destino}})</p>
                    </div>
                  </div>
              	</div>
              </div>
      	</div>
    </div>
</div>
<navfooter></navfooter>
<div id="detalle_pedido_view" ng-show="false">
  <img src="images/logo.png" height="50">
  <h4 class="title_print">Courier Liebre Express</h4>
  <hr>
  <p style="display:block !important;text-align:right;margin-bottom:0px !important">Nº Pedido: LIE000{{pedidos.id}}</p>
  <div style="width:30%;display:inline-block !important;float:left">
    <p style="margin-bottom:0px !important">CLIENTE</p>
      <hr>
      <p class="text_print" ng-if="pedidos.tipo_usuario != 3">Nombre: {{pedidos.nombre}}</p>
      <p class="text_print" ng-if="pedidos.tipo_usuario == 3">Razón Social: {{pedidos.nombre}}</p>
      <p class="text_print" ng-if="pedidos.tipo_usuario != 3">DNI: {{cliente.dni}}</p>
      <p class="text_print" ng-if="pedidos.tipo_usuario == 3">RUC: {{cliente.ruc}}</p>
      <p class="text_print">Teléfono: {{cliente.telefono}}</p>
      <p class="text_print">Correo: {{cliente.email}}</p>
  </div>
  <div style="width:22%; display:inline-block !important;float:left">
    <p style="margin-bottom:0px !important">ORIGEN</p>
    <hr>
    <div style="width:95%">
      <p class="text_print">Dirección: {{destinos[0].origen}}</p>
      <p class="text_print">Distrito: {{destinos[0].distrito_origen}}</p>
      <p class="text_print">Departamento: {{destinos[0].departamento_origen}}</p>
      <p class="text_print">Contacto: {{destinos[0].nombre_origen}}</p>
      <p class="text_print">Teléfono: {{destinos[0].telefono_origen}}</p>
    <p class="text_print">Comentarios: {{destinos[0].comentarios}}</p>
    </div>
  </div>
  <div style="width:45%; display:inline-block !important;float:left">  
    <p ng-show="destinos.length > 1" style="margin-bottom:0px !important">DESTINOS</p>
    <hr>
    <div ng-repeat="destinos in destinos">
      <div ng-show="destinos.length > 1" style="width:23%; display:inline-block !important;float:left;font-size:10px !important;">
        LIE000{{pedidos_detalle.id}}-{{getLetter($index)}}
      </div>
      <div style="width:50%; display:inline-block !important; float:left;margin-left:5px">
          <p class="text_print" style="margin-top:0px !important">Dirección: {{destinos.destino}}</p>
          <p class="text_print">Distrito: {{destinos.distrito_destino}}</p>
          <p class="text_print">Departamento: {{destinos.departamento_destino}}</p>
          <p class="text_print">Contacto: {{destinos.nombre_destino}}</p>
          <p class="text_print">Teléfono: {{destinos.telefono_destino}}</p>
      </div>
       <div style="width:25%; display:inline-block !important;margin: 0px 0px 5px 0px;float:left;text-align:right !important">
          <p class="text_print" style="margin-top:0px !important">KM: {{destinos.km}}</p>
          <p class="text_print">Costo: S/.{{destinos.costo1 | number:2}}</p>
      </div>
      <div style="width:100%; display:inline-block !important;margin: 0px 0px 5px 0px;">
        <p class="text_print">Comentarios: {{destinos.comentarios2}}</p>
      </div>
      <div style="width:49%; display:inline-block !important;margin: 0px 0px 5px 0px;" ng-if="cliente.tipo_usuario == 3">
        <p class="text_print">Productos: {{destinos.detalle}}</p>
        <div ng-if="!$last"><hr></div>
      </div>
      <div style="width:48%; display:inline-block !important;margin: 0px 0px 5px 0px;text-align:right !important" ng-if="cliente.tipo_usuario == 3">
        <p class="text_print">Costo Productos: S/.{{destinos.subtotal | number:2}}</p>
        <p class="text_print">Costo Entrega: S/.{{destinos.cobrarecommerce | number:2}}</p>
        <p class="text_print">Descuento: S/.{{destinos.descuento | number:2}}</p>
        <div ng-if="!$last"><hr></div>
      </div>
    </div>
    <hr>
    <div style="text-align:right;width:100%;display:block !important;">
      <p class="text_print">COSTO ENVIO: S/.{{pedidos.costo1 | number:2}}</p>
      <p class="text_print">SERVICIOS ADICIONALES: S/.{{pedidos.costo_recojo | number:2}}</p>
      <hr>
      <p class="text_print">TOTAL COSTO: S/.{{costoe2 | number:2}}</p>
      <p class="text_print">TOTAL KM: {{pedidos.km}}</p>
    </div>
  </div>
  <br>
  <p class="text_print">Servicio: {{pedidos.tipo}}, Forma de Pago: {{pedidos.forma_pago1}}, Fecha de Envío: {{pedidos.fecha}}</p>
  <p style="display:block !important;text-align:right;margin-bottom:0px !important;font-size:9px">Emitido: {{fecha_actual}}</p>
</div>

